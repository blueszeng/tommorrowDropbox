{"version":3,"sources":["basemodel.coffee"],"names":[],"mappings":"AAAA,IAAA;;AAAA,CAAA,GAAI,OAAA,CAAQ,YAAR;;AACE;EACS,mBAAC,SAAD,EAAY,SAAZ,EAAuB,SAAvB;AAEX,QAAA;IAAA,IAAC,CAAA,SAAD,GAAa;IACb,IAAC,CAAA,KAAD,GAAS,SAAA,CAAU,SAAV;;UACH,CAAC;;IAEP,IAAC,CAAA,MAAD,GAAU;IACV,IAAC,CAAA,MAAM,CAAC,KAAR,GAAgB;IAChB,IAAC,CAAA,MAAM,CAAC,KAAR,GAAgB;IAChB,IAAC,CAAA,MAAM,CAAC,MAAR,GAAiB;IACjB,IAAC,CAAA,MAAM,CAAC,MAAR,GAAiB;IACjB,IAAC,CAAA,MAAM,CAAC,KAAR,GAAgB;IAChB,IAAC,CAAA,MAAM,CAAC,GAAR,GAAc;IACd,IAAC,CAAA,MAAD,GAAU;IACV,IAAC,CAAA,MAAD,GAAU;EAdC;;sBAiBb,QAAA,GAAU,SAAA;WACN,IAAC,CAAA;EADK;;sBAEV,KAAA,GAAO,SAAC,KAAD;IACL,IAAC,CAAA,MAAM,CAAC,KAAR,GAAgB;WAChB;EAFK;;sBAGP,KAAA,GAAO,SAAC,KAAD;IACL,IAAC,CAAA,MAAM,CAAC,KAAR,GAAgB;WAChB;EAFK;;sBAGP,MAAA,GAAQ,SAAC,MAAD;IACN,IAAC,CAAA,MAAM,CAAC,MAAR,GAAiB;WACjB;EAFM;;sBAGR,MAAA,GAAQ,SAAC,MAAD;IACN,IAAC,CAAA,MAAM,CAAC,MAAR,GAAiB;WACjB;EAFM;;sBAGR,KAAA,GAAO,SAAC,KAAD;WACL;EADK;;sBAEP,GAAA,GAAK,SAAC,GAAD;IACH,IAAC,CAAA,MAAM,CAAC,GAAR,GAAc;WACd;EAFG;;sBAGL,IAAA,GAAM,SAAC,QAAD;IACJ,IAAG,IAAC,CAAA,MAAJ;MACE,IAAC,CAAA,MAAD,CAAQ,QAAR;MACA,IAAC,CAAA,MAAM,CAAC,KAAR,GAAgB;MAChB,IAAC,CAAA,MAAM,CAAC,KAAR,GAAgB;MAChB,IAAC,CAAA,MAAM,CAAC,MAAR,GAAiB;MACjB,IAAC,CAAA,MAAM,CAAC,MAAR,GAAiB;MACjB,IAAC,CAAA,MAAM,CAAC,KAAR,GAAgB;MAChB,IAAC,CAAA,MAAM,CAAC,GAAR,GAAc;MACd,IAAC,CAAA,MAAD,GAAU;aACV,IAAC,CAAA,MAAD,GAAU,KATZ;KAAA,MAAA;aAWE,QAAA,CAAa,IAAA,KAAA,CAAM,QAAN,CAAb,EAXF;;EADI;;;;;;AAcR,MAAM,CAAC,OAAP,GACE","file":"basemodel.js","sourceRoot":"/source/","sourcesContent":["_ = require 'underscore'\nclass BaseModel\n  constructor: (modelName, modelType, loadModel) ->\n\n    @modelType = modelType\n    @Model = loadModel modelName\n    @Model.sync?()\n\n    @params = {}\n    @params.where = null\n    @params.limit = 0\n    @params.offset = 0\n    @params.fields = null\n    @params.order = ''\n    @params.raw = false\n    @result = null\n    @action = null\n\n\n  getModel: () ->\n      @Model\n  where: (param) ->\n    @params.where = param\n    @\n  limit: (limit) ->\n    @params.limit = limit\n    @\n  offset: (offset) ->\n    @params.offset = offset\n    @\n  fields: (fields) ->\n    @params.fields = fields\n    @\n  order: (order) ->\n    @\n  raw: (raw) ->\n    @params.raw = raw\n    @\n  done: (callback)  ->\n    if @action\n      @action(callback)\n      @params.where = null\n      @params.limit = 0\n      @params.offset = 0\n      @params.fields = null\n      @params.order = ''\n      @params.raw = false\n      @result = null\n      @action = null\n    else\n      callback new Error('没有指定动作')\n\nmodule.exports =\n  BaseModel"]}